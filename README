Osu AHR lobby bot written in Go. Creates a new lobby or joins an existing one when executed.

Usage: osubot [-h] [-c config] [channel]

Options:
    -h, --help  Print this help message.
    -c config   Specify path to configuration file. Default is "config.json".
    channel     Join existing lobby instead of creating a new one.

Configuration is stored in a .json file with the following format:

    {
        "server": {                                          Should be changed only when running on
            "host": "irc.ppy.sh",                            a custom Bancho server. "rate-limit"
            "port": 6667,                                    defines how many requests can be sent
            "rate-limit": 4                                  to the server in a second.
        },
        "credentials": {                                     Osu IRC credentials. "session" is 
            "username": "your-irc-username",                 optional and is used only by !ddl 
            "password": "your-irc-password",                 command.
            "session": "osu_session-cookie"
        },
        "lobby-name": {                                      {min} and {max} are replaced by 
            "template": "{min}-{max}* | Auto Host Rotate",   difficulty range values, "auto-update"
            "auto-update": true                              won't allow changing lobby name.
        },
        "host-rotation": {                                   "allow-transfers" allows giving the 
            "enabled": true,                                 host to other players while moving them
            "allow-transfers": false,                        to the end of the queue. The player
            "print-queue-on-match-end": false,               giving up the host will also be put to
            "report-illegal-host-transfers": false           the end of the queue.
        },
        "difficulty-constraint": {                           The host can use !sr [min max] command
            "enabled": true,                                 if "allow-changing" is set. If the host
            "range": [4.5, 5.99],                            violates difficulty range more than
            "allow-changing": false,                         "max-violations" times he will be 
            "report-violations": true,                       skipped unless "max-violations" number
            "max-violations": 3                              is 0.
        },
        "auto-start": {
            "enabled": false,                                Force match start after a "delay"
            "delay": 120,                                    even if not all players are ready.
            "print-initial-warning": false
        },
        "voting": {                                          Controls voting to skip the host or 
            "enabled": true,                                 start the match. Thresholds are 
            "start-vote-threshold": 0.75,                    multipliers for the number of players 
            "skip-vote-threshold": 0.75                      currently in the lobby.
        }
    }

User credentials and server address can be acquired in the Legacy API section of Osu user settings:

    https://osu.ppy.sh/home/account/edit#legacy-api

If the bot successfully creates or joins a lobby it will save the lobby channel in "lobby.save" file
and will try to rejoin that lobby if it crashes or gets terminated. The [channel] command-line 
argument overrides this setting. If the argument is not present saved lobby channel is not valid 
anymore the bot will simply create a new lobby.

Crash report gets be saved to "crash.log".

Available chat commands:

    !tl/timeleft                Prints the time left until the end of the map if the match is 
                                currently in the progress.

    !q/queue [usernames...]     Prints host queue. Can be used by the admin to define the queue.
                                User names can be shortened to the first letters in lower case. The
                                rest of the users that weren't found in the given list will be put 
                                at the end of the queue. User names with spaces can be put inside 
                                double quotes.

                                For example !q v u "a m" will put "Voyager", "user123" and "A Man"  
                                in the queue making Voyager the host.

    !qp [username]              Prints position in the queue either of the user who executed the 
                                command or the one with the "username".

    !start [delay]              When used by the regular player starts vote to start the match. When
                                used by the host either starts the match immediatly or begins a 
                                start countdown.

    !abort                      Aborts match start countdown.

    !skip                       Starts vote to skip the host or transfers host to the next user in 
                                the queue if used by the host or the admin.

    !autoskip [on/off]          Enables/disables host auto skip for the user executing the command 
                                or prints autoskip status if no arguments were specified.

    !mirrors                    Prints download mirrors for the current beatmap.

    !ddl [abort]                Uploads beatmap file to online file exchanger. Useful for giving the
                                download link to a recently created beatmap to players with firewall
                                issues. "abort" cancels beatmap downloading if it takes too long.
                                Requires "credentials.session" to be set to the value of 
                                "osu_session" cookie that can be found in any request to osu.ppy.sh
                                in Network tab of Developer Tools (Ctrl+Shift+I) in the browser.

    !ahr [on/off]               Enabled/disables host rotation or prints its status when used by the
                                admin.

    !sr [min max/on/off]        Sets/enabled/disables difficulty range and updates lobby name or 
                                prints currently activate difficulty range when used by the admin or
                                by the host if "difficulty-constraint.allow-changing" is set.

    !pb [username]              Prints personal or "username's" best score on the current beatmap.

    !help/info                  Prints match and bot info.

Lobby chat log is by default saved to "chat.log". IRC log is saved to "irc.log" for debug purposes.
